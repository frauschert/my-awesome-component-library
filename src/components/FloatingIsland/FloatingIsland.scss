@import '../../styles/theme-vars';

@keyframes float {
    0%,
    100% {
        transform: translateY(0px);
    }
    50% {
        transform: translateY(-20px);
    }
}

@keyframes pulse-scale {
    0%,
    100% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
    }
}

@keyframes glow-pulse {
    0%,
    100% {
        opacity: 0.5;
        transform: scale(1);
    }
    50% {
        opacity: 0.8;
        transform: scale(1.2);
    }
}

@keyframes particle-orbit {
    0% {
        transform: rotate(var(--particle-angle, 0deg))
            translateX(calc(var(--particle-radius, 100px)))
            rotate(calc(-1 * var(--particle-angle, 0deg)));
        opacity: 0;
    }
    20% {
        opacity: 1;
    }
    80% {
        opacity: 1;
    }
    100% {
        transform: rotate(calc(var(--particle-angle, 0deg) + 360deg))
            translateX(calc(var(--particle-radius, 100px)))
            rotate(calc(-1 * (var(--particle-angle, 0deg) + 360deg)));
        opacity: 0;
    }
}

.floating-island {
    position: relative;
    border-radius: 24px;
    padding: 2rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.3s ease, box-shadow 0.3s ease;

    &__content {
        position: relative;
        z-index: 1;
    }

    // Variants
    &--default {
        background: var(--theme-bg-primary);
        border: 1px solid var(--theme-border-color);
        box-shadow: var(--theme-shadow-lg);
    }

    &--gradient {
        background: linear-gradient(
            135deg,
            var(--theme-primary) 0%,
            var(--theme-primary-light) 50%,
            var(--theme-success) 100%
        );
        color: var(--theme-text-on-primary);
        box-shadow: var(--theme-shadow-xl);
    }

    &--glassmorphism {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(var(--blur-intensity, 10px));
        -webkit-backdrop-filter: blur(var(--blur-intensity, 10px));
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1),
            inset 0 1px 0 rgba(255, 255, 255, 0.3);
    }

    &--neon {
        background: var(--theme-bg-primary);
        border: 2px solid var(--theme-primary);
        box-shadow: 0 0 20px rgba(86, 156, 214, 0.5),
            0 0 40px rgba(86, 156, 214, 0.3),
            inset 0 0 20px rgba(86, 156, 214, 0.1);
    }

    // Sizes
    &--small {
        padding: 1rem;
        border-radius: 16px;
        min-width: 120px;
        min-height: 80px;
    }

    &--medium {
        padding: 2rem;
        border-radius: 24px;
        min-width: 200px;
        min-height: 120px;
    }

    &--large {
        padding: 3rem;
        border-radius: 32px;
        min-width: 300px;
        min-height: 200px;
    }

    &--xlarge {
        padding: 4rem;
        border-radius: 40px;
        min-width: 400px;
        min-height: 280px;
    }

    // Animations
    &--float {
        animation: float 6s ease-in-out infinite;
    }

    &--pulse {
        animation: pulse-scale 3s ease-in-out infinite;
    }

    &--hover-lift {
        &:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--theme-shadow-xl);
        }
    }

    // Interactive effect
    &--interactive {
        cursor: pointer;
        transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);

        &:hover {
            transform: scale(1.02);
        }
    }

    // Elevated state
    &--elevated {
        box-shadow: var(--theme-shadow-xl);
    }

    // Glow effect
    &--glow {
        &::before {
            content: '';
            position: absolute;
            inset: -2px;
            border-radius: inherit;
            background: linear-gradient(
                135deg,
                var(--theme-primary),
                var(--theme-primary-light),
                var(--theme-success)
            );
            z-index: -1;
            opacity: 0.7;
            filter: blur(20px);
            animation: glow-pulse 3s ease-in-out infinite;
        }
    }

    &__glow {
        position: absolute;
        inset: -40px;
        border-radius: inherit;
        background: radial-gradient(
            circle,
            rgba(86, 156, 214, 0.3) 0%,
            transparent 70%
        );
        z-index: -1;
        animation: glow-pulse 3s ease-in-out infinite;
        pointer-events: none;
    }

    // Particles
    &__particles {
        position: absolute;
        inset: 0;
        pointer-events: none;
        z-index: 0;
    }

    &__particle {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 8px;
        height: 8px;
        background: var(--theme-primary);
        border-radius: 50%;
        box-shadow: 0 0 10px var(--theme-primary);
        animation: particle-orbit 8s linear infinite;
        animation-delay: var(--particle-delay, 0s);
        --particle-radius: 120px;

        &::after {
            content: '';
            position: absolute;
            inset: -4px;
            background: var(--theme-primary);
            border-radius: 50%;
            opacity: 0.3;
            filter: blur(4px);
        }
    }
}

// Size-specific particle adjustments
.floating-island--small .floating-island__particle {
    --particle-radius: 80px;
    width: 6px;
    height: 6px;
}

.floating-island--large .floating-island__particle {
    --particle-radius: 150px;
    width: 10px;
    height: 10px;
}

.floating-island--xlarge .floating-island__particle {
    --particle-radius: 180px;
    width: 12px;
    height: 12px;
}

// Dark theme adjustments
.theme--dark {
    .floating-island {
        &--glassmorphism {
            background: rgba(30, 30, 30, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        &--neon {
            box-shadow: 0 0 20px rgba(86, 156, 214, 0.7),
                0 0 40px rgba(86, 156, 214, 0.5),
                inset 0 0 20px rgba(86, 156, 214, 0.2);
        }
    }
}
